<!DOCTYPE html>  
<html lang="pt-BR">  
<head>  
<meta charset="UTF-8">  
<title>Feliz Anivers√°rio Jonatas</title>  
  
<style>  
body {  
  margin: 0;  
  background: radial-gradient(circle at top, #00338d, #c60c30);  
  height: 100vh;  
  display: flex;  
  justify-content: center;  
  align-items: center;  
  font-family: Arial, sans-serif;  
  overflow: hidden;  
  color: white;  
}  
  
.container {  
  text-align: center;  
  position: relative;  
}  
  
.logo {  
  font-size: 48px;  
  font-weight: bold;  
  margin-bottom: 10px;  
}  
.logo span {  
  color: #c60c30;  
}  
  
.instrucao {  
  font-size: 18px;  
  margin-bottom: 20px;  
}  
  
.bolo {  
  position: relative;  
  width: 260px;  
  height: 200px;  
  margin: auto;  
}  
  
.bolo-base {  
  position: absolute;  
  bottom: 0;  
  width: 260px;  
  height: 120px;  
  background: linear-gradient(#002244, #00152b);  
  border-radius: 20px;  
  box-shadow: inset 0 -10px 0 rgba(0,0,0,0.3);  
}  
  
.bolo-topo {  
  position: absolute;  
  bottom: 100px;  
  width: 240px;  
  height: 60px;  
  background: linear-gradient(#c60c30, #8b0a1f);  
  border-radius: 20px;  
  left: 10px;  
}  
  
.vela {  
  position: absolute;  
  bottom: 160px;  
  left: 50%;  
  transform: translateX(-50%);  
  width: 10px;  
  height: 50px;  
  background: white;  
}  
  
.chama {  
  width: 18px;  
  height: 18px;  
  background: radial-gradient(circle, yellow, orange, red);  
  border-radius: 50%;  
  position: absolute;  
  top: -18px;  
  left: -4px;  
  animation: flicker 0.4s infinite alternate;  
}  
  
@keyframes flicker {  
  from { transform: scale(1); }  
  to { transform: scale(1.4); }  
}  
  
.mensagem {  
  display: none;  
  font-size: 26px;  
  margin-top: 25px;  
  font-weight: bold;  
}  
  
.confete, .fogo {  
  position: absolute;  
  border-radius: 50%;  
}  
  
.confete {  
  width: 10px;  
  height: 10px;  
  animation: cair 3s linear infinite;  
}  
  
@keyframes cair {  
  from { transform: translateY(-100vh) rotate(0); }  
  to { transform: translateY(100vh) rotate(360deg); }  
}  
  
.fogo {  
  width: 6px;  
  height: 6px;  
  animation: explodir 1.2s ease-out forwards;  
}  
  
@keyframes explodir {  
  from { transform: scale(1); opacity: 1; }  
  to { transform: scale(4); opacity: 0; }  
}  
</style>  
</head>  
  
<body>  
  
<div class="container">  
  <div class="logo">üèà <span>BILLS</span> STYLE</div>  
  <div class="instrucao">üé§ Assopre no microfone para apagar a vela</div>  
  
  <div class="bolo">  
    <div class="vela">  
      <div class="chama" id="chama"></div>  
    </div>  
    <div class="bolo-topo"></div>  
    <div class="bolo-base"></div>  
  </div>  
  
  <div class="mensagem" id="mensagem">  
    üéâ Feliz 32 anos, Jonatas! üéÇ    
    <br>Que esse novo ano seja uma vit√≥ria!  
  </div>  
</div>  
  
<audio id="parabens" src="https://www.soundjay.com/human/parabens-voce-1.mp3"></audio>  
  
<script>  
let apagado = false;  
  
navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {  
  const ctx = new AudioContext();  
  const analyser = ctx.createAnalyser();  
  const mic = ctx.createMediaStreamSource(stream);  
  const data = new Uint8Array(analyser.fftSize);  
  mic.connect(analyser);  
  
  function detectar() {  
    analyser.getByteTimeDomainData(data);  
    let volume = 0;  
    for (let i = 0; i < data.length; i++) {  
      volume += Math.abs(data[i] - 128);  
    }  
    if (volume > 1400 && !apagado) apagar();  
    requestAnimationFrame(detectar);  
  }  
  detectar();  
});  
  
function apagar() {  
  apagado = true;  
  document.getElementById("chama").style.display = "none";  
  document.getElementById("mensagem").style.display = "block";  
  document.getElementById("parabens").play();  
  confetes();  
  fogos();  
}  
  
function confetes() {  
  for (let i = 0; i < 80; i++) {  
    const c = document.createElement("div");  
    c.className = "confete";  
    c.style.left = Math.random() * 100 + "vw";  
    c.style.background = Math.random() > 0.5 ? "#c60c30" : "#00338d";  
    c.style.animationDuration = (2 + Math.random() * 3) + "s";  
    document.body.appendChild(c);  
    setTimeout(() => c.remove(), 5000);  
  }  
}  
  
function fogos() {  
  for (let i = 0; i < 30; i++) {  
    const f = document.createElement("div");  
    f.className = "fogo";  
    f.style.left = Math.random() * 100 + "vw";  
    f.style.top = Math.random() * 50 + "vh";  
    f.style.background = Math.random() > 0.5 ? "#ffdd00" : "#ffffff";  
    document.body.appendChild(f);  
    setTimeout(() => f.remove(), 1200);  
  }  
}  
</script>  
  
</body>  
</html>  
